(()=>{var e={};e.id=792,e.ids=[792],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},71603:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>l.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>c,routeModule:()=>g,tree:()=>o});var r=s(50482),a=s(69108),n=s(62563),l=s.n(n),i=s(68300),d={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(d[e]=()=>i[e]);s.d(t,d);let o=["",{children:["dashboard",{children:["warehouse-admin",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,73017)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/warehouse-admin/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(s.bind(s,96339)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(s.bind(s,82917)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/warehouse-admin/page.tsx"],u="/dashboard/warehouse-admin/page",m={require:s,loadChunk:()=>Promise.resolve()},g=new r.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/warehouse-admin/page",pathname:"/dashboard/warehouse-admin",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:o}})},92611:(e,t,s)=>{Promise.resolve().then(s.bind(s,77501))},19355:(e,t,s)=>{Promise.resolve().then(s.bind(s,17783))},16133:()=>{},37298:(e,t,s)=>{Promise.resolve().then(s.t.bind(s,2583,23)),Promise.resolve().then(s.t.bind(s,26840,23)),Promise.resolve().then(s.t.bind(s,38771,23)),Promise.resolve().then(s.t.bind(s,13225,23)),Promise.resolve().then(s.t.bind(s,9295,23)),Promise.resolve().then(s.t.bind(s,43982,23))},77501:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>D});var r=s(95344),a=s(3729),n=s(8428),l=s(27984),i=s(56506),d=s(2273),o=s(89895),c=s(12401),u=s(2246),m=s(55794),g=s(16278),x=s(69599),p=s(37121),h=s(91917),b=s(75950),f=s(50340),y=s(28240),v=s(13746),j=s(48120);function _({user:e,onLogout:t}){let s=(0,n.usePathname)(),[_,N]=(0,a.useState)({});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{let e={},{data:t}=await l.O.from("booking_tasks").select("id").eq("status","pending");e.todo=t?.length||0;let{data:s}=await l.O.from("bookings").select("id").eq("status","pending");e.bookings=s?.length||0;let{data:r}=await l.O.from("printer_foiling_orders").select("id");e.printer=r?.length||0;let{data:a}=await l.O.from("booking_tasks").select("id").neq("status","completed");e.warehouse=a?.length||0;let{data:n}=await l.O.from("invoices").select("id").eq("status","draft");e.invoices=n?.length||0,N(e)}catch(e){console.error("Error fetching badge counts:",e)}},w=[{name:"Dashboard",icon:d.Z,href:"/dashboard",roles:["admin","manager"]},{name:"Kunder",icon:o.Z,href:"/dashboard/customers",roles:["admin","manager","support"]},{name:"Bokningar",icon:c.Z,href:"/dashboard/bookings",roles:["admin","manager"]},{name:"Att G\xf6ra",icon:u.Z,href:"/dashboard/todo",roles:["admin","manager"]},{name:"Kalender",icon:m.Z,href:"/dashboard/calendar",roles:["admin","manager","warehouse"]},{name:"Lager",icon:g.Z,href:"/dashboard/warehouse",roles:["warehouse"]},{name:"Lager Admin",icon:g.Z,href:"/dashboard/warehouse-admin",roles:["admin"]},{name:"Tryckeri",icon:x.Z,href:"/dashboard/printer",roles:["admin","printer"]},{name:"Fakturor",icon:p.Z,href:"/dashboard/invoices",roles:["admin","manager"]},{name:"Produkter & Prislista",icon:h.Z,href:"/dashboard/products",roles:["admin","manager"]},{name:"FAQ",icon:b.Z,href:"/dashboard/faq",roles:["admin","manager"]},{name:"Till\xe4gg",icon:h.Z,href:"/dashboard/addons",roles:["admin","manager"]},{name:"Aktivitetslogg",icon:p.Z,href:"/dashboard/activity-log",roles:["admin"]},{name:"Analytics",icon:f.Z,href:"/dashboard/analytics",roles:["admin"]},{name:"Anv\xe4ndare",icon:y.Z,href:"/dashboard/users",roles:["admin"]},{name:"Inst\xe4llningar",icon:v.Z,href:"/dashboard/settings",roles:["admin"]}].filter(t=>t.roles.includes(e.role));return(0,r.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("img",{src:"/logo.png",alt:"EventGaraget",className:"h-18"})})}),r.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:w.map(e=>{let t=e.icon,a="/dashboard"===e.href?s===e.href:s.startsWith(e.href),n=0;return"/dashboard/todo"===e.href&&(n=_.todo||0),"/dashboard/bookings"===e.href&&(n=_.bookings||0),"/dashboard/printer"===e.href&&(n=_.printer||0),"/dashboard/warehouse"===e.href&&(n=_.warehouse||0),"/dashboard/invoices"===e.href&&(n=_.invoices||0),(0,r.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors justify-between ${a?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[r.jsx(t,{size:20}),r.jsx("span",{children:e.name})]}),n>0&&r.jsx("span",{className:"bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full min-w-max",children:n})]},e.href)})}),(0,r.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[(0,r.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.full_name}),r.jsx("p",{className:"text-xs text-gray-500",children:e.email}),(0,r.jsxs)("p",{className:"text-xs text-gray-500 capitalize mt-1",children:["Rolle: ",e.role]})]}),(0,r.jsxs)("button",{onClick:t,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[r.jsx(j.Z,{size:18}),r.jsx("span",{className:"text-sm",children:"Logga ut"})]})]})]})}var N=s(28765),k=s(33037);function w({user:e}){return(0,r.jsxs)("div",{className:"fixed top-0 left-64 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 z-40",children:[r.jsx("div",{className:"flex-1 max-w-md",children:(0,r.jsxs)("div",{className:"relative",children:[r.jsx(N.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),r.jsx("input",{type:"text",placeholder:"S\xf6k kunder, bokningar...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500 focus:bg-white"})]})}),(0,r.jsxs)("div",{className:"flex items-center gap-6 ml-8",children:[(0,r.jsxs)("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[r.jsx(k.Z,{size:20}),r.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3 pl-6 border-l border-gray-200",children:[r.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:r.jsx("span",{className:"text-sm font-bold text-red-600",children:e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),r.jsx("span",{className:"text-sm text-gray-700",children:e.full_name})]})]})]})}function D({children:e}){let t=(0,n.useRouter)(),[s,i]=(0,a.useState)(null),[d,o]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await l.O.auth.getSession();if(!e){t.push("/");return}let{data:s}=await l.O.from("user_profiles").select("*").eq("id",e.user.id).single();s&&i(s)}catch(e){console.error("Auth check error:",e),t.push("/")}finally{o(!1)}})()},[t]);let c=async()=>{await l.O.auth.signOut(),t.push("/")};return d?r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,r.jsxs)("div",{className:"text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg gradient-primary animate-pulse mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Laddar..."})]})}):s?(0,r.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[r.jsx(_,{user:s,onLogout:c}),(0,r.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[r.jsx(w,{user:s}),r.jsx("main",{className:"flex-1 overflow-auto pt-20 px-8 pb-8",children:e})]})]}):null}},17783:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>h});var r=s(95344),a=s(3729),n=s(27984),l=s(63024),i=s(64290),d=s(66138),o=s(51838),c=s(14513),u=s(16278),m=s(80508),g=s(55794),x=s(8428);let p={low:"bg-blue-100 text-blue-700",medium:"bg-yellow-100 text-yellow-700",high:"bg-orange-100 text-orange-700",urgent:"bg-red-100 text-red-700"};function h(){let e=(0,x.useRouter)(),[t,s]=(0,a.useState)([]),[h,b]=(0,a.useState)([]),[f,y]=(0,a.useState)(!0),[v,j]=(0,a.useState)(null),[_,N]=(0,a.useState)(null),[k,w]=(0,a.useState)(""),[D,S]=(0,a.useState)(new Set),[C,E]=(0,a.useState)(""),[Z,A]=(0,a.useState)(""),[P,q]=(0,a.useState)("all"),[O,U]=(0,a.useState)("all"),[M,L]=(0,a.useState)(new Map),[T,$]=(0,a.useState)(!1),[z,F]=(0,a.useState)(new Map),[B,I]=(0,a.useState)(null),[R,G]=(0,a.useState)({title:"",description:"",priority:"medium",assigned_to_user_id:"",due_date:"",task_category:"other"});(0,a.useEffect)(()=>{K()},[]);let K=async()=>{try{y(!0);let{data:e}=await n.O.from("booking_tasks").select("id, booking_id, title, description, priority, status, due_date, assigned_to_name, assigned_to_user_id, task_type").in("task_type",["pickup","delivery","custom","invoice"]).order("due_date",{ascending:!0,nullsFirst:!1}),{data:t}=await n.O.from("bookings").select("id, booking_number, location, event_date, pickup_date, delivery_date, products_requested, customer_id, delivery_type, status").order("event_date",{ascending:!0}),r=t?.map(e=>e.customer_id).filter(Boolean)||[],{data:a}=await n.O.from("customers").select("id, name").in("id",r),l=new Map(a?.map(e=>[e.id,e.name])||[]),i=new Map(t?.map(e=>[e.id,e])||[]),d=e?.map(e=>{let t=i.get(e.booking_id);return{...e,booking_number:t?.booking_number||"N/A",location:t?.location||"N/A",event_date:t?.event_date||"N/A",customer_name:l.get(t?.customer_id)||"Ok\xe4nd kund",delivery_type:t?.delivery_type}})||[],o=t?.flatMap(e=>{let t=[];return e.pickup_date&&t.push({id:`${e.id}-pickup`,booking_id:e.id,title:`ðŸ“¦ Upph\xe4mtning: ${e.booking_number}`,description:`Upph\xe4mtning fr\xe5n ${e.location||"N/A"}`,priority:"medium",status:"completed"===e.status?"completed":"pending",due_date:e.pickup_date,booking_number:e.booking_number,location:e.location||"N/A",event_date:e.event_date,assigned_to_name:"",assigned_to_user_id:void 0,customer_name:l.get(e.customer_id)||"Ok\xe4nd kund",task_type:"pickup",delivery_type:e.delivery_type}),e.delivery_date&&t.push({id:`${e.id}-delivery`,booking_id:e.id,title:`ðŸšš Leverans: ${e.booking_number}`,description:`Leverans till ${e.location||"N/A"}`,priority:"medium",status:"completed"===e.status?"completed":"pending",due_date:e.delivery_date,booking_number:e.booking_number,location:e.location||"N/A",event_date:e.event_date,assigned_to_name:"",assigned_to_user_id:void 0,customer_name:l.get(e.customer_id)||"Ok\xe4nd kund",task_type:"delivery",delivery_type:e.delivery_type}),t})||[],c=[...d,...o];s(c),L(i);let u=[...new Set(t?.map(e=>e.id)||[])],{data:m}=await n.O.from("booking_notes").select("*").in("booking_id",u).order("created_at",{ascending:!1});if(m){let e=new Map;m.forEach(t=>{e.has(t.booking_id)||e.set(t.booking_id,[]),e.get(t.booking_id).push(t)}),F(e)}let{data:g}=await n.O.from("user_profiles").select("id, full_name").eq("role","warehouse").order("full_name",{ascending:!0});g&&b(g)}catch(e){console.error("Error fetching data:",e),j({type:"error",text:"Kunde inte ladda data"})}finally{y(!1)}},X=async(e,t)=>{if(!t||0===t.length){j({type:"error",text:"V\xe4lj minst en anst\xe4lld"});return}try{let s=h.filter(e=>t.includes(e.id)),r=s.map(e=>e.full_name).join(", "),{error:a}=await n.O.from("booking_tasks").update({assigned_to_user_ids:t,assigned_to_name:r}).eq("id",e);if(a)throw a;j({type:"success",text:`Uppgift tilldelad ${s.length} anst\xe4lld${s.length>1?"a":""}!`}),N(null),S(new Set),w(""),K(),setTimeout(()=>j(null),2e3)}catch(e){console.error("Error assigning task:",e),j({type:"error",text:"Kunde inte tilldela uppgift"})}},H=async e=>{if(e.preventDefault(),!R.title||!R.assigned_to_user_id){j({type:"error",text:"Titel och anst\xe4lld \xe4r obligatoriska"});return}try{let e=h.find(e=>e.id===R.assigned_to_user_id),{error:t}=await n.O.from("booking_tasks").insert([{booking_id:null,title:R.title,description:R.description,priority:R.priority,status:"pending",task_type:R.task_category,assigned_to_user_id:R.assigned_to_user_id,assigned_to_name:e?.full_name,due_date:R.due_date||null}]);if(t)throw t;j({type:"success",text:"Uppgift skapad och tilldelad!"}),G({title:"",description:"",priority:"medium",assigned_to_user_id:"",due_date:""}),$(!1),K(),setTimeout(()=>j(null),2e3)}catch(e){console.error("Error creating task:",e),j({type:"error",text:"Kunde inte skapa uppgift"})}};if(f)return r.jsx("div",{className:"flex items-center justify-center h-screen",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})});let V=t.filter(e=>{if("all"!==P&&e.status!==P||"all"!==O&&e.assigned_to_user_id!==O)return!1;let t=e.event_date||e.due_date;if(!t)return!1;let s=new Date(t);if(C&&s<new Date(C))return!1;if(Z){let e=new Date(Z);if(e.setHours(23,59,59,999),s>e)return!1}return!0}),J=()=>new Date().toISOString().split("T")[0];return r.jsx("div",{className:"p-8 bg-gray-50 min-h-screen",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[r.jsx("div",{className:"flex items-center justify-between mb-8",children:(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[r.jsx("button",{onClick:()=>e.back(),className:"p-2 hover:bg-gray-200 rounded-lg transition",children:r.jsx(l.Z,{size:24,className:"text-gray-600"})}),(0,r.jsxs)("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"\uD83D\uDCE6 Lager Administration"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"F\xf6rdela k\xf6rningar och uppgifter till lagerarbetare"})]})]})}),v&&(0,r.jsxs)("div",{className:`mb-6 p-4 rounded-lg font-semibold flex items-center gap-2 ${"success"===v.type?"bg-green-100 text-green-700 border border-green-300":"bg-red-100 text-red-700 border border-red-300"}`,children:["success"===v.type?r.jsx(i.Z,{size:20}):r.jsx(d.Z,{size:20}),v.text]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-8",children:[(0,r.jsxs)("button",{onClick:()=>$(!T),className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition",children:[r.jsx(o.Z,{size:18}),T?"Avbryt":"L\xe4gg till Uppgift"]}),T&&(0,r.jsxs)("form",{onSubmit:H,className:"mt-4 p-4 bg-blue-50 rounded-lg space-y-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Titel *"}),r.jsx("input",{type:"text",value:R.title,onChange:e=>G({...R,title:e.target.value}),placeholder:"T.ex. Reng\xf6ring av lager",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Beskrivning"}),r.jsx("textarea",{value:R.description,onChange:e=>G({...R,description:e.target.value}),placeholder:"Beskrivning av uppgiften (valfritt)",rows:3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"grid grid-cols-3 gap-4",children:[(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Kategori *"}),(0,r.jsxs)("select",{value:R.task_category,onChange:e=>G({...R,task_category:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"pickup",children:"\uD83D\uDCE6 Upph\xe4mtning"}),r.jsx("option",{value:"delivery",children:"\uD83D\uDE9A Leverans"}),r.jsx("option",{value:"custom",children:"\uD83D\uDCDD Lagerupgift"}),r.jsx("option",{value:"other",children:"\uD83D\uDD27 \xd6vrig"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Prioritet"}),(0,r.jsxs)("select",{value:R.priority,onChange:e=>G({...R,priority:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"low",children:"\uD83D\uDD35 L\xe5g"}),r.jsx("option",{value:"medium",children:"\uD83D\uDFE1 Medel"}),r.jsx("option",{value:"high",children:"\uD83D\uDFE0 H\xf6g"}),r.jsx("option",{value:"urgent",children:"\uD83D\uDD34 Br\xe5dskande"})]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Tilldela till *"}),(0,r.jsxs)("select",{value:R.assigned_to_user_id,onChange:e=>G({...R,assigned_to_user_id:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"",children:"-- V\xe4lj anst\xe4lld --"}),h.map(e=>r.jsx("option",{value:e.id,children:e.full_name},e.id))]})]}),(0,r.jsxs)("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"F\xf6rfallodatum"}),r.jsx("input",{type:"date",value:R.due_date,onChange:e=>G({...R,due_date:e.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),r.jsx("button",{type:"submit",className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 font-semibold transition",children:"Skapa Uppgift"})]})]}),r.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-4 mb-8",children:(0,r.jsxs)("div",{className:"flex flex-col md:flex-row gap-4 items-end",children:[(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Fr\xe5n Datum"}),r.jsx("input",{type:"date",value:C,onChange:e=>E(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),(0,r.jsxs)("div",{className:"flex-1",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-1",children:"Till Datum"}),r.jsx("input",{type:"date",value:Z,onChange:e=>A(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),r.jsx("button",{onClick:()=>{let e=J();E(e),A(e)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 font-semibold transition",children:"\uD83D\uDCC5 Idag"}),(C||Z)&&(0,r.jsxs)("button",{onClick:()=>{E(""),A("")},className:"px-4 py-2 bg-gray-300 text-gray-700 rounded-lg hover:bg-gray-400 font-semibold flex items-center gap-2 transition",children:[r.jsx(c.Z,{size:18}),"Rensa Filter"]})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Filtrera efter Status"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:[{value:"all",label:"Alla"},{value:"pending",label:"â³ V\xe4ntande"},{value:"in_progress",label:"âš¡ P\xe5g\xe5ande"},{value:"completed",label:"âœ… Slutf\xf6rda"}].map(e=>r.jsx("button",{onClick:()=>q(e.value),className:`px-3 py-1 rounded-lg text-sm font-semibold transition ${P===e.value?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:e.label},e.value))})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg border border-gray-200 p-4",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"Filtrera efter Anst\xe4lld"}),(0,r.jsxs)("select",{value:O,onChange:e=>U(e.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"all",children:"Alla anst\xe4llda"}),r.jsx("option",{value:"",children:"Ej tilldelade"}),h.map(e=>r.jsx("option",{value:e.id,children:e.full_name},e.id))]})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Totala Uppgifter"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:V.length}),(C||Z)&&(0,r.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:[t.length," totalt"]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Br\xe5dskande"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:V.filter(e=>"urgent"===e.priority).length})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Lagerarbetare"}),r.jsx("p",{className:"text-3xl font-bold text-blue-600 mt-2",children:h.length})]}),(0,r.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 font-semibold",children:"Ej Tilldelade"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:V.filter(e=>!e.assigned_to_user_id).length})]})]}),r.jsx("div",{className:"space-y-4",children:0===V.length?(0,r.jsxs)("div",{className:"bg-white rounded-lg p-8 text-center border border-gray-200",children:[r.jsx(u.Z,{size:48,className:"mx-auto text-gray-300 mb-4"}),r.jsx("p",{className:"text-gray-500 font-semibold",children:0===t.length?"Inga uppgifter":"Inga uppgifter f\xf6r valda datum"})]}):V.map(e=>(0,r.jsxs)("div",{className:`bg-white rounded-lg border-2 p-4 transition ${"urgent"===e.priority?"border-red-300":"border-gray-200"}`,children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center",children:[(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[r.jsx("h3",{className:"font-bold text-gray-900",children:e.title}),r.jsx("span",{className:"text-xs bg-gray-200 text-gray-700 px-2 py-1 rounded",children:"pickup"===e.task_type?"\uD83D\uDCE6 Upph\xe4mtning":"delivery"===e.task_type?"internal"===e.delivery_type?"\uD83C\uDFE2 Intern leverans":"\uD83D\uDE9A Extern leverans":"custom"===e.task_type?"\uD83D\uDCDD Uppgift":e.task_type})]}),(0,r.jsxs)("div",{className:"flex gap-3 mt-1 text-sm text-gray-600",children:[(0,r.jsxs)("span",{children:["\uD83D\uDCCC ",e.booking_number]}),(0,r.jsxs)("span",{children:["\uD83D\uDC64 ",e.customer_name]})]}),M.get(e.booking_id)?.products_requested&&(0,r.jsxs)("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-500 mb-1",children:"Produkter:"}),r.jsx("div",{className:"text-xs text-gray-600 space-y-0.5",children:(()=>{let t=[],s=M.get(e.booking_id)?.products_requested;try{"string"==typeof s?t=JSON.parse(s):Array.isArray(s)&&(t=s)}catch(e){console.error("Error parsing products:",e)}return r.jsx("div",{children:t.map((e,t)=>(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[r.jsx("span",{children:"â€¢"}),r.jsx("span",{children:e.name}),e.quantity&&(0,r.jsxs)("span",{className:"text-gray-500",children:["(x",e.quantity,")"]})]},t))})})()})]})]}),r.jsx("div",{className:"md:col-span-1 flex items-center justify-center",children:r.jsx("button",{onClick:()=>I(B===e.id?null:e.id),className:"px-3 py-1 bg-gray-100 text-gray-700 rounded text-sm font-semibold hover:bg-gray-200",children:B===e.id?"â–¼ Anteckningar":"â–¶ Anteckningar"})})]}),B===e.id&&(0,r.jsxs)("div",{className:"mt-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-700 mb-3",children:"\uD83D\uDCDD Anteckningar:"}),z.get(e.booking_id)?.length===0?r.jsx("p",{className:"text-xs text-gray-500",children:"Inga anteckningar"}):r.jsx("div",{className:"space-y-2",children:z.get(e.booking_id)?.map(e=>r.jsxs("div",{className:"bg-white p-3 rounded border border-gray-200",children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsx("p",{className:"text-xs font-semibold text-gray-600",children:e.created_by_name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[new Date(e.created_at).toLocaleDateString("sv-SE")," kl ",new Date(e.created_at).toLocaleTimeString("sv-SE",{hour:"2-digit",minute:"2-digit"})]})]}),r.jsx("p",{className:"text-xs text-gray-700 whitespace-pre-wrap",children:e.note})]},e.id))})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4 items-center mt-4",children:[(0,r.jsxs)("div",{className:"md:col-span-2 text-sm",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-600",children:[r.jsx(m.Z,{size:14}),e.location]}),(0,r.jsxs)("div",{className:"flex items-center gap-1 text-gray-600 mt-1",children:[r.jsx(g.Z,{size:14}),new Date(e.event_date).toLocaleDateString("sv-SE")]})]}),r.jsx("div",{className:"md:col-span-1",children:r.jsx("span",{className:`inline-block px-3 py-1 rounded text-xs font-bold ${p[e.priority]}`,children:e.priority.toUpperCase()})}),r.jsx("div",{className:"md:col-span-2",children:_===e.id?(0,r.jsxs)("div",{className:"space-y-2",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-700 mb-2",children:"Tilldela till (v\xe4lj flera):"}),r.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-48 overflow-y-auto border border-gray-300 rounded p-2 bg-gray-50",children:h.map(e=>(0,r.jsxs)("label",{className:"flex items-center gap-2 cursor-pointer hover:bg-blue-50 p-1 rounded",children:[r.jsx("input",{type:"checkbox",checked:D.has(e.id),onChange:t=>{let s=new Set(D);t.target.checked?s.add(e.id):s.delete(e.id),S(s)},className:"w-4 h-4 rounded border-gray-300 cursor-pointer"}),r.jsx("span",{className:"text-sm",children:e.full_name})]},e.id))}),(0,r.jsxs)("div",{className:"flex gap-2 pt-2",children:[r.jsx("button",{onClick:()=>X(e.id,Array.from(D)),className:"flex-1 px-3 py-1 bg-green-600 text-white rounded text-sm font-semibold hover:bg-green-700",children:"âœ“ OK"}),r.jsx("button",{onClick:()=>{N(null),S(new Set)},className:"flex-1 px-3 py-1 bg-gray-400 text-white rounded text-sm font-semibold hover:bg-gray-500",children:"Avbryt"})]})]}):r.jsx("button",{onClick:()=>N(e.id),className:"px-3 py-1 bg-blue-600 text-white rounded text-sm font-semibold hover:bg-blue-700 w-full",children:e.assigned_to_name||"Tilldela"})})]})]},e.id))})]})})}},27984:(e,t,s)=>{"use strict";s.d(t,{O:()=>l});var r=s(77635);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,n=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;a&&n||console.warn("Missing Supabase environment variables - using demo mode");let l=(0,r.eI)(a||"https://demo.supabase.co",n||"demo-key")},66138:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]])},63024:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]])},64290:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]])},80508:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("MapPin",[["path",{d:"M20 10c0 6-8 12-8 12s-8-6-8-12a8 8 0 0 1 16 0Z",key:"2oe9fu"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]])},51838:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},14513:(e,t,s)=>{"use strict";s.d(t,{Z:()=>r});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let r=(0,s(69224).Z)("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]])},96339:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(86843).createProxy)(String.raw`/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/layout.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},73017:(e,t,s)=>{"use strict";s.r(t),s.d(t,{$$typeof:()=>n,__esModule:()=>a,default:()=>l});let r=(0,s(86843).createProxy)(String.raw`/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/warehouse-admin/page.tsx`),{__esModule:a,$$typeof:n}=r,l=r.default},82917:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>n,metadata:()=>a});var r=s(25036);s(67272);let a={title:"EventGaraget CRM",description:"CRM Portal f\xf6r EventGaraget"};function n({children:e}){return r.jsx("html",{lang:"sv",children:r.jsx("body",{className:"bg-gray-50",children:e})})}},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[638,26,477,934],()=>s(71603));module.exports=r})();