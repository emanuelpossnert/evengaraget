(()=>{var e={};e.id=130,e.ids=[130],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},20001:(e,r,t)=>{"use strict";t.r(r),t.d(r,{GlobalError:()=>o.a,__next_app__:()=>g,originalPathname:()=>p,pages:()=>c,routeModule:()=>u,tree:()=>d});var a=t(50482),s=t(69108),n=t(62563),o=t.n(n),i=t(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);t.d(r,l);let d=["",{children:["dashboard",{children:["calendar",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(t.bind(t,40206)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/calendar/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(t.bind(t,96339)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(t.bind(t,82917)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(t.t.bind(t,69361,23)),"next/dist/client/components/not-found-error"]}],c=["/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/calendar/page.tsx"],p="/dashboard/calendar/page",g={require:t,loadChunk:()=>Promise.resolve()},u=new a.AppPageRouteModule({definition:{kind:s.x.APP_PAGE,page:"/dashboard/calendar/page",pathname:"/dashboard/calendar",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:d}})},81555:(e,r,t)=>{Promise.resolve().then(t.bind(t,53717))},53717:(e,r,t)=>{"use strict";t.r(r),t.d(r,{default:()=>j});var a=t(95344),s=t(3729),n=t(27984),o=t(16278),i=t(55794),l=t(91917),d=t(96885),c=t(71532),p=t(97751),g=t(65814),u=t(21303),x=t(82780),m=t(11657),b=t(60522),h=t(78782);function y(e,r){return function(e,r){let t=(0,b.Q)(e);return isNaN(r)?(0,h.L)(e,NaN):(r&&t.setDate(t.getDate()+r),t)}(e,7*r)}var v=t(39674),k=t(48067);function j(){let[e,r]=(0,s.useState)((0,g.z)(new Date,{weekStartsOn:1})),[t,b]=(0,s.useState)([]),[h,j]=(0,s.useState)(!0),[f,_]=(0,s.useState)("all"),D=(0,g.z)(e,{weekStartsOn:1}),N=(0,u.v)(e,{weekStartsOn:1}),w=(0,x.D)({start:D,end:N});(0,s.useEffect)(()=>{E()},[]);let E=async()=>{try{j(!0);let{data:e,error:r}=await n.O.from("bookings").select("*").in("status",["pending","confirmed","completed"]);if(r)throw r;let t=[];for(let r of e||[]){let{data:e}=await n.O.from("customers").select("name").eq("id",r.customer_id).single(),a=e?.name||"Ok\xe4nd",s="Produkter";try{s=JSON.parse(r.products_requested||"[]").map(e=>`${e.name} (${e.quantity})`).join(", ")}catch(e){s="Produkter"}r.pickup_date&&t.push({id:`${r.id}-pickup`,booking_id:r.id,booking_number:r.booking_number,type:"pickup",date:r.pickup_date,end_date:r.pickup_date,location:r.location||"Ok\xe4nd plats",customer_name:a,products:s}),r.event_date&&t.push({id:`${r.id}-event`,booking_id:r.id,booking_number:r.booking_number,type:"event",date:r.event_date,end_date:r.event_end_date||r.event_date,location:r.location||"Ok\xe4nd plats",customer_name:a,products:s}),r.delivery_date&&t.push({id:`${r.id}-delivery`,booking_id:r.id,booking_number:r.booking_number,type:"delivery",date:r.delivery_date,end_date:r.delivery_date,location:r.location||"Ok\xe4nd plats",customer_name:a,products:s,delivery_type:r.delivery_type})}b(t)}catch(e){console.error("Error fetching bookings:",e)}finally{j(!1)}},C=e=>t.filter(r=>(0,m.K)(new Date(r.date),e)),M=e=>"all"===f?e:e.filter(e=>e.type===f),P=(e,r)=>"pickup"===e?"bg-blue-500 hover:bg-blue-600 border-l-4 border-blue-700":"event"===e?"bg-green-500 hover:bg-green-600 border-l-4 border-green-700":"delivery"===e&&"external"===r?"bg-orange-500 hover:bg-orange-600 border-l-4 border-orange-700":"delivery"===e?"bg-purple-500 hover:bg-purple-600 border-l-4 border-purple-700":"internal"===e?"bg-indigo-500 hover:bg-indigo-600 border-l-4 border-indigo-700":"foliering"===e?"bg-pink-500 hover:bg-pink-600 border-l-4 border-pink-700":"external_shipping"===e?"bg-amber-600 hover:bg-amber-700 border-l-4 border-amber-800":"customer_pickup"===e?"bg-cyan-500 hover:bg-cyan-600 border-l-4 border-cyan-700":"booked"===e?"bg-emerald-600 hover:bg-emerald-700 border-l-4 border-emerald-800":"inquiry"===e?"bg-slate-500 hover:bg-slate-600 border-l-4 border-slate-700":"bg-gray-500 hover:bg-gray-600 border-l-4 border-gray-700",q=e=>"pickup"===e?a.jsx(o.Z,{size:16}):"event"===e?a.jsx(i.Z,{size:16}):a.jsx(l.Z,{size:16}),U=(e,r)=>"pickup"===e?"Upph\xe4mtning":"event"===e?"Event":"delivery"===e?"external"===r?"Extern Leverans":"Intern Leverans":"internal"===e?"Internal":"foliering"===e?"Foliering":"external_shipping"===e?"Extern Frakt":"customer_pickup"===e?"Customer Pickup":"booked"===e?"Bokat":"inquiry"===e?"F\xf6rfr\xe5gan":e;return(0,a.jsxs)("div",{className:"space-y-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Bokningskalender"}),a.jsx("p",{className:"text-gray-500 mt-1",children:"Veckovyn \xf6ver alla bokningar"})]}),(0,a.jsxs)("button",{className:"flex items-center gap-2 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:[a.jsx(d.Z,{size:18}),"Exportera PDF"]})]}),(0,a.jsxs)("div",{className:"flex items-center justify-between bg-white rounded-lg p-4 border border-gray-200",children:[a.jsx("button",{onClick:()=>r(y(e,-1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(c.Z,{size:20})}),a.jsx("div",{className:"text-center",children:(0,a.jsxs)("h2",{className:"text-lg font-bold text-gray-900",children:["Vecka ",(0,v.WU)(D,"ww")," (",(0,v.WU)(D,"MMM d",{locale:k.sv})," - ",(0,v.WU)(N,"MMM d",{locale:k.sv}),")"]})}),a.jsx("button",{onClick:()=>r(y(e,1)),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(p.Z,{size:20})})]}),a.jsx("div",{className:"flex gap-2",children:["all","pickup","delivery","event","internal","foliering","external_shipping","customer_pickup","booked","inquiry"].map(e=>(0,a.jsxs)("button",{onClick:()=>_(e),className:`px-4 py-2 rounded-lg font-medium transition-colors ${f===e?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["all"===e&&"Alla","pickup"===e&&"\uD83D\uDCE6 Upph\xe4mtning","delivery"===e&&"\uD83D\uDE9A Leverans","event"===e&&"\uD83C\uDF89 Event","internal"===e&&"\uD83C\uDFE2 Internal","foliering"===e&&"✨ Foliering","external_shipping"===e&&"\uD83D\uDCEE Extern Frakt","customer_pickup"===e&&"\uD83D\uDC64 Customer Pickup","booked"===e&&"✅ Bokat","inquiry"===e&&"❓ F\xf6rfr\xe5gan"]},e))}),a.jsx("div",{className:"bg-white rounded-lg border border-gray-200 overflow-x-auto",children:(0,a.jsxs)("table",{className:"w-full border-collapse",children:[a.jsx("thead",{children:(0,a.jsxs)("tr",{children:[a.jsx("th",{className:"bg-gray-100 border-b-2 border-gray-300 p-4 text-left font-bold text-gray-900 w-48 sticky left-0 z-10",children:"Aktivitet"}),w.map(e=>(0,a.jsxs)("th",{className:"bg-gray-100 border-b-2 border-gray-300 p-4 text-center font-bold text-gray-900 min-w-40",children:[a.jsx("div",{className:"text-sm uppercase",children:(0,v.WU)(e,"eee",{locale:k.sv})}),a.jsx("div",{className:"text-lg",children:(0,v.WU)(e,"d MMM",{locale:k.sv})})]},e.toString()))]})}),a.jsx("tbody",{children:h?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-500",children:"Laddar bokningar..."})}):0===t.length?a.jsx("tr",{children:a.jsx("td",{colSpan:8,className:"p-8 text-center text-gray-500",children:"Inga bokningar denna vecka"})}):w.map(e=>{let r=M(C(e));return r.length>0?r.map((t,s)=>(0,a.jsxs)("tr",{className:s%2==0?"bg-white":"bg-gray-50",children:[0===s&&a.jsx("td",{rowSpan:r.length,className:"border-r border-gray-200 p-4 bg-gray-50 font-medium text-gray-900 sticky left-0 z-10 align-top",children:(0,v.WU)(e,"cccc",{locale:k.sv}).toUpperCase()}),a.jsx("td",{className:"border-r border-gray-200 p-0"}),w.map(r=>a.jsx("td",{className:"border-r border-gray-200 p-2 text-center min-w-40",children:(0,m.K)(r,e)&&(0,a.jsxs)("div",{className:`${P(t.type,t.delivery_type)} text-white rounded px-3 py-2 text-sm font-medium cursor-pointer hover:shadow-md transition-all group`,children:[(0,a.jsxs)("div",{className:"flex items-center gap-1 justify-center mb-1",children:[q(t.type),a.jsx("span",{children:U(t.type,t.delivery_type)})]}),a.jsx("div",{className:"text-xs truncate",children:t.booking_number}),a.jsx("div",{className:"text-xs truncate",children:t.customer_name}),(0,a.jsxs)("div",{className:"hidden group-hover:block absolute z-20 bottom-full left-1/2 transform -translate-x-1/2 mb-2 bg-gray-900 text-white p-3 rounded-lg text-left w-48 shadow-lg text-xs",children:[a.jsx("p",{className:"font-bold mb-1",children:t.booking_number}),(0,a.jsxs)("p",{children:["\uD83D\uDCCD ",t.location]}),(0,a.jsxs)("p",{children:["\uD83D\uDC64 ",t.customer_name]}),(0,a.jsxs)("p",{children:["\uD83D\uDCE6 ",t.products]})]})]})},r.toString()))]},t.id)):null})})]})}),(0,a.jsxs)("div",{className:"bg-white rounded-lg p-6 border border-gray-200",children:[a.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Operations\xf6versikt"}),a.jsx("div",{className:"space-y-3",children:0===t.length?a.jsx("p",{className:"text-gray-500 text-center py-8",children:"Inga aktiviteter denna vecka"}):t.filter(e=>e.date>=(0,v.WU)(D,"yyyy-MM-dd")&&e.date<=(0,v.WU)(N,"yyyy-MM-dd")).filter(e=>"all"===f||e.type===f).sort((e,r)=>new Date(e.date).getTime()-new Date(r.date).getTime()).map(e=>(0,a.jsxs)("div",{className:"flex items-start gap-4 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[a.jsx("div",{className:`${P(e.type,e.delivery_type)} text-white rounded p-2 flex-shrink-0`,children:q(e.type)}),(0,a.jsxs)("div",{className:"flex-1",children:[(0,a.jsxs)("p",{className:"font-bold text-gray-900",children:[U(e.type,e.delivery_type),": ",e.booking_number]}),a.jsx("p",{className:"text-sm text-gray-600",children:e.customer_name}),(0,a.jsxs)("p",{className:"text-sm text-gray-600",children:["\uD83D\uDCCD ",e.location]}),(0,a.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["\uD83D\uDCE6 ",e.products]})]}),(0,a.jsxs)("div",{className:"text-right flex-shrink-0",children:[a.jsx("p",{className:"font-medium text-gray-900",children:(0,v.WU)(new Date(e.date),"EEEE d MMM",{locale:k.sv})}),a.jsx("p",{className:"text-xs text-gray-500",children:e.type})]})]},e.id))})]})]})}},71532:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]])},97751:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]])},96885:(e,r,t)=>{"use strict";t.d(r,{Z:()=>a});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let a=(0,t(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},40206:(e,r,t)=>{"use strict";t.r(r),t.d(r,{$$typeof:()=>n,__esModule:()=>s,default:()=>o});let a=(0,t(86843).createProxy)(String.raw`/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/calendar/page.tsx`),{__esModule:s,$$typeof:n}=a,o=a.default}};var r=require("../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e),a=r.X(0,[638,26,477,934,184,825],()=>t(20001));module.exports=a})();