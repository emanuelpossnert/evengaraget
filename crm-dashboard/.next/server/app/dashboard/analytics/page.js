(()=>{var e={};e.id=171,e.ids=[171],e.modules={47849:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external")},72934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},55403:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external")},54580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},94749:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external")},45869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},20399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},98188:e=>{"use strict";e.exports=require("module")},53807:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>o.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var n=r(50482),a=r(69108),s=r(62563),o=r.n(s),i=r(68300),l={};for(let e in i)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["dashboard",{children:["analytics",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,9628)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/analytics/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,96339)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,82917)),"/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,69361,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/analytics/page.tsx"],u="/dashboard/analytics/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/dashboard/analytics/page",pathname:"/dashboard/analytics",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},89088:(e,t,r)=>{Promise.resolve().then(r.bind(r,87011))},92611:(e,t,r)=>{Promise.resolve().then(r.bind(r,77501))},16133:()=>{},37298:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2583,23)),Promise.resolve().then(r.t.bind(r,26840,23)),Promise.resolve().then(r.t.bind(r,38771,23)),Promise.resolve().then(r.t.bind(r,13225,23)),Promise.resolve().then(r.t.bind(r,9295,23)),Promise.resolve().then(r.t.bind(r,43982,23))},87011:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>eB});var n=r(95344),a=r(3729),s=r.n(a),o=r(27984),i=r(63024),l=r(96885),c=r(8428),d=r(92760),u=r(9282),m=r(18964),p=r(86517),h=r(56815),x=r(41333),g=r(51282),y=r.n(g),f=r(55409),b=r.n(f),v=r(56995),j=r.n(v),N=r(44505),w=r.n(N),k=r(1149),A=r.n(k),P=r(62601),O=r(53784),E=r(6750),S=r(37279),D=r(86402),_=r(40281),C=r(14765),B=r(72136),K=["layout","type","stroke","connectNulls","isRange","ref"],M=["key"];function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function F(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function T(){return(T=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function R(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function I(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?R(Object(r),!0).forEach(function(t){q(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):R(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function z(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,V(n.key),n)}}function G(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(G=function(){return!!e})()}function $(e){return($=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Z(e,t){return(Z=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function q(e,t,r){return(t=V(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function V(e){var t=function(e,t){if("object"!=L(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=L(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==L(t)?t:t+""}var U=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return t=n,r=[].concat(s),t=$(t),q(e=function(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,G()?Reflect.construct(t,r||[],$(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!0}),q(e,"id",(0,_.EL)("recharts-area-")),q(e,"handleAnimationEnd",function(){var t=e.props.onAnimationEnd;e.setState({isAnimationFinished:!0}),y()(t)&&t()}),q(e,"handleAnimationStart",function(){var t=e.props.onAnimationStart;e.setState({isAnimationFinished:!1}),y()(t)&&t()}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Z(e,t)}(n,e),t=[{key:"renderDots",value:function(e,t,r){var a=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(a&&!o)return null;var i=this.props,l=i.dot,c=i.points,d=i.dataKey,u=(0,B.L6)(this.props,!1),m=(0,B.L6)(l,!0),p=c.map(function(e,t){var r=I(I(I({key:"dot-".concat(t),r:3},u),m),{},{index:t,cx:e.x,cy:e.y,dataKey:d,value:e.value,payload:e.payload,points:c});return n.renderDotItem(l,r)}),h={clipPath:e?"url(#clipPath-".concat(t?"":"dots-").concat(r,")"):null};return s().createElement(E.m,T({className:"recharts-area-dots"},h),p)}},{key:"renderHorizontalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,o=n[0].x,i=n[n.length-1].x,l=e*Math.abs(o-i),c=b()(n.map(function(e){return e.y||0}));return((0,_.hj)(r)&&"number"==typeof r?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(b()(r.map(function(e){return e.y||0})),c)),(0,_.hj)(c))?s().createElement("rect",{x:o<i?o:o-l,y:0,width:l,height:Math.floor(c+(a?parseInt("".concat(a),10):1))}):null}},{key:"renderVerticalRect",value:function(e){var t=this.props,r=t.baseLine,n=t.points,a=t.strokeWidth,o=n[0].y,i=n[n.length-1].y,l=e*Math.abs(o-i),c=b()(n.map(function(e){return e.x||0}));return((0,_.hj)(r)&&"number"==typeof r?c=Math.max(r,c):r&&Array.isArray(r)&&r.length&&(c=Math.max(b()(r.map(function(e){return e.x||0})),c)),(0,_.hj)(c))?s().createElement("rect",{x:0,y:o<i?o:o-l,width:c+(a?parseInt("".concat(a),10):1),height:Math.floor(l)}):null}},{key:"renderClipRect",value:function(e){return"vertical"===this.props.layout?this.renderVerticalRect(e):this.renderHorizontalRect(e)}},{key:"renderAreaStatically",value:function(e,t,r,n){var a=this.props,o=a.layout,i=a.type,l=a.stroke,c=a.connectNulls,d=a.isRange,u=(a.ref,F(a,K));return s().createElement(E.m,{clipPath:r?"url(#clipPath-".concat(n,")"):null},s().createElement(P.H,T({},(0,B.L6)(u,!0),{points:e,connectNulls:c,type:i,baseLine:t,layout:o,stroke:"none",className:"recharts-area-area"})),"none"!==l&&s().createElement(P.H,T({},(0,B.L6)(this.props,!1),{className:"recharts-area-curve",layout:o,type:i,connectNulls:c,fill:"none",points:e})),"none"!==l&&d&&s().createElement(P.H,T({},(0,B.L6)(this.props,!1),{className:"recharts-area-curve",layout:o,type:i,connectNulls:c,fill:"none",points:t})))}},{key:"renderAreaWithAnimation",value:function(e,t){var r=this,n=this.props,a=n.points,o=n.baseLine,i=n.isAnimationActive,l=n.animationBegin,c=n.animationDuration,d=n.animationEasing,u=n.animationId,m=this.state,p=m.prevPoints,h=m.prevBaseLine;return s().createElement(x.ZP,{begin:l,duration:c,isActive:i,easing:d,from:{t:0},to:{t:1},key:"area-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(n){var i=n.t;if(p){var l,c=p.length/a.length,d=a.map(function(e,t){var r=Math.floor(t*c);if(p[r]){var n=p[r],a=(0,_.k4)(n.x,e.x),s=(0,_.k4)(n.y,e.y);return I(I({},e),{},{x:a(i),y:s(i)})}return e});return l=(0,_.hj)(o)&&"number"==typeof o?(0,_.k4)(h,o)(i):j()(o)||w()(o)?(0,_.k4)(h,0)(i):o.map(function(e,t){var r=Math.floor(t*c);if(h[r]){var n=h[r],a=(0,_.k4)(n.x,e.x),s=(0,_.k4)(n.y,e.y);return I(I({},e),{},{x:a(i),y:s(i)})}return e}),r.renderAreaStatically(d,l,e,t)}return s().createElement(E.m,null,s().createElement("defs",null,s().createElement("clipPath",{id:"animationClipPath-".concat(t)},r.renderClipRect(i))),s().createElement(E.m,{clipPath:"url(#animationClipPath-".concat(t,")")},r.renderAreaStatically(a,o,e,t)))})}},{key:"renderArea",value:function(e,t){var r=this.props,n=r.points,a=r.baseLine,s=r.isAnimationActive,o=this.state,i=o.prevPoints,l=o.prevBaseLine,c=o.totalLength;return s&&n&&n.length&&(!i&&c>0||!A()(i,n)||!A()(l,a))?this.renderAreaWithAnimation(e,t):this.renderAreaStatically(n,a,e,t)}},{key:"render",value:function(){var e,t=this.props,r=t.hide,n=t.dot,a=t.points,o=t.className,i=t.top,l=t.left,c=t.xAxis,d=t.yAxis,u=t.width,m=t.height,p=t.isAnimationActive,x=t.id;if(r||!a||!a.length)return null;var g=this.state.isAnimationFinished,y=1===a.length,f=(0,h.Z)("recharts-area",o),b=c&&c.allowDataOverflow,v=d&&d.allowDataOverflow,N=b||v,w=j()(x)?this.id:x,k=null!==(e=(0,B.L6)(n,!1))&&void 0!==e?e:{r:3,strokeWidth:2},A=k.r,P=k.strokeWidth,O=((0,B.jf)(n)?n:{}).clipDot,D=void 0===O||O,_=2*(void 0===A?3:A)+(void 0===P?2:P);return s().createElement(E.m,{className:f},b||v?s().createElement("defs",null,s().createElement("clipPath",{id:"clipPath-".concat(w)},s().createElement("rect",{x:b?l:l-u/2,y:v?i:i-m/2,width:b?u:2*u,height:v?m:2*m})),!D&&s().createElement("clipPath",{id:"clipPath-dots-".concat(w)},s().createElement("rect",{x:l-_/2,y:i-_/2,width:u+_,height:m+_}))):null,y?null:this.renderArea(N,w),(n||y)&&this.renderDots(N,D,w),(!p||g)&&S.e.renderCallByParent(this.props,a))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,curBaseLine:e.baseLine,prevPoints:t.curPoints,prevBaseLine:t.curBaseLine}:e.points!==t.curPoints||e.baseLine!==t.curBaseLine?{curPoints:e.points,curBaseLine:e.baseLine}:null}}],t&&z(n.prototype,t),r&&z(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(a.PureComponent);q(U,"displayName","Area"),q(U,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!D.x.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"}),q(U,"getBaseValue",function(e,t,r,n){var a=e.layout,s=e.baseValue,o=t.props.baseValue,i=null!=o?o:s;if((0,_.hj)(i)&&"number"==typeof i)return i;var l="horizontal"===a?n:r,c=l.scale.domain();if("number"===l.type){var d=Math.max(c[0],c[1]),u=Math.min(c[0],c[1]);return"dataMin"===i?u:"dataMax"===i?d:d<0?d:Math.max(Math.min(c[0],c[1]),0)}return"dataMin"===i?c[0]:"dataMax"===i?c[1]:c[0]}),q(U,"getComposedData",function(e){var t,r=e.props,n=e.item,a=e.xAxis,s=e.yAxis,o=e.xAxisTicks,i=e.yAxisTicks,l=e.bandSize,c=e.dataKey,d=e.stackedData,u=e.dataStartIndex,m=e.displayedData,p=e.offset,h=r.layout,x=d&&d.length,g=U.getBaseValue(r,n,a,s),y="horizontal"===h,f=!1,b=m.map(function(e,t){x?r=d[u+t]:Array.isArray(r=(0,C.F$)(e,c))?f=!0:r=[g,r];var r,n=null==r[1]||x&&null==(0,C.F$)(e,c);return y?{x:(0,C.Hv)({axis:a,ticks:o,bandSize:l,entry:e,index:t}),y:n?null:s.scale(r[1]),value:r,payload:e}:{x:n?null:a.scale(r[1]),y:(0,C.Hv)({axis:s,ticks:i,bandSize:l,entry:e,index:t}),value:r,payload:e}});return t=x||f?b.map(function(e){var t=Array.isArray(e.value)?e.value[0]:null;return y?{x:e.x,y:null!=t&&null!=e.y?s.scale(t):null}:{x:null!=t?a.scale(t):null,y:e.y}}):y?s.scale(g):a.scale(g),I({points:b,baseLine:t,layout:h,isRange:f},p)}),q(U,"renderDotItem",function(e,t){var r;if(s().isValidElement(e))r=s().cloneElement(e,t);else if(y()(e))r=e(t);else{var n=(0,h.Z)("recharts-area-dot","boolean"!=typeof e?e.className:""),a=t.key,o=F(t,M);r=s().createElement(O.o,T({},o,{key:a,className:n}))}return r});var W=r(2303),H=r(2422);function Y(e){return(Y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function J(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,er(n.key),n)}}function X(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(X=function(){return!!e})()}function Q(e){return(Q=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ee(e,t){return(ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function et(e,t,r){return(t=er(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function er(e){var t=function(e,t){if("object"!=Y(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=Y(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==Y(t)?t:t+""}var en=function(e){var t;function r(){var e,t;return function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,r),e=r,t=arguments,e=Q(e),function(e,t){if(t&&("object"===Y(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,X()?Reflect.construct(e,t||[],Q(this).constructor):e.apply(this,t))}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(r,e),J(r.prototype,[{key:"render",value:function(){return null}}]),t&&J(r,t),Object.defineProperty(r,"prototype",{writable:!1}),r}(a.Component);et(en,"displayName","ZAxis"),et(en,"defaultProps",{zAxisId:0,range:[64,64],scale:"auto",type:"number"});var ea=r(36812),es=r(51236),eo=r(36070),ei=r(46267),el=r(22289),ec=["option","isActive"];function ed(){return(ed=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eu(e){var t=e.option,r=e.isActive,n=function(e,t){if(null==e)return{};var r,n,a=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(n=0;n<s.length;n++)r=s[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}(e,ec);return"string"==typeof t?a.createElement(el.bn,ed({option:a.createElement(ei.v,ed({type:t},n)),isActive:r,shapeType:"symbols"},n)):a.createElement(el.bn,ed({option:t,isActive:r,shapeType:"symbols"},n))}function em(e){return(em="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ep(){return(ep=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function eh(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function ex(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?eh(Object(r),!0).forEach(function(t){ev(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):eh(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function eg(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,ej(n.key),n)}}function ey(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch(e){}return(ey=function(){return!!e})()}function ef(e){return(ef=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function eb(e,t){return(eb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e})(e,t)}function ev(e,t,r){return(t=ej(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ej(e){var t=function(e,t){if("object"!=em(e)||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=em(n))return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==em(t)?t:t+""}var eN=function(e){var t,r;function n(){!function(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}(this,n);for(var e,t,r,a=arguments.length,s=Array(a),o=0;o<a;o++)s[o]=arguments[o];return t=n,r=[].concat(s),t=ef(t),ev(e=function(e,t){if(t&&("object"===em(t)||"function"==typeof t))return t;if(void 0!==t)throw TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,ey()?Reflect.construct(t,r||[],ef(this).constructor):t.apply(this,r)),"state",{isAnimationFinished:!1}),ev(e,"handleAnimationEnd",function(){e.setState({isAnimationFinished:!0})}),ev(e,"handleAnimationStart",function(){e.setState({isAnimationFinished:!1})}),ev(e,"id",(0,_.EL)("recharts-scatter-")),e}return function(e,t){if("function"!=typeof t&&null!==t)throw TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&eb(e,t)}(n,e),t=[{key:"renderSymbolsStatically",value:function(e){var t=this,r=this.props,n=r.shape,a=r.activeShape,o=r.activeIndex,i=(0,B.L6)(this.props,!1);return e.map(function(e,r){var l=o===r,c=ex(ex({},i),e);return s().createElement(E.m,ep({className:"recharts-scatter-symbol",key:"symbol-".concat(null==e?void 0:e.cx,"-").concat(null==e?void 0:e.cy,"-").concat(null==e?void 0:e.size,"-").concat(r)},(0,eo.bw)(t.props,e,r),{role:"img"}),s().createElement(eu,ep({option:l?a:n,isActive:l,key:"symbol-".concat(r)},c)))})}},{key:"renderSymbolsWithAnimation",value:function(){var e=this,t=this.props,r=t.points,n=t.isAnimationActive,a=t.animationBegin,o=t.animationDuration,i=t.animationEasing,l=t.animationId,c=this.state.prevPoints;return s().createElement(x.ZP,{begin:a,duration:o,isActive:n,easing:i,from:{t:0},to:{t:1},key:"pie-".concat(l),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(t){var n=t.t,a=r.map(function(e,t){var r=c&&c[t];if(r){var a=(0,_.k4)(r.cx,e.cx),s=(0,_.k4)(r.cy,e.cy),o=(0,_.k4)(r.size,e.size);return ex(ex({},e),{},{cx:a(n),cy:s(n),size:o(n)})}var i=(0,_.k4)(0,e.size);return ex(ex({},e),{},{size:i(n)})});return s().createElement(E.m,null,e.renderSymbolsStatically(a))})}},{key:"renderSymbols",value:function(){var e=this.props,t=e.points,r=e.isAnimationActive,n=this.state.prevPoints;return r&&t&&t.length&&(!n||!A()(n,t))?this.renderSymbolsWithAnimation():this.renderSymbolsStatically(t)}},{key:"renderErrorBar",value:function(){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var e=this.props,t=e.points,r=e.xAxis,n=e.yAxis,a=e.children,o=(0,B.NN)(a,ea.W);return o?o.map(function(e,a){var o=e.props,i=o.direction,l=o.dataKey;return s().cloneElement(e,{key:"".concat(i,"-").concat(l,"-").concat(t[a]),data:t,xAxis:r,yAxis:n,layout:"x"===i?"vertical":"horizontal",dataPointFormatter:function(e,t){return{x:e.cx,y:e.cy,value:"x"===i?+e.node.x:+e.node.y,errorVal:(0,C.F$)(e,t)}}})}):null}},{key:"renderLine",value:function(){var e,t,r=this.props,n=r.points,a=r.line,o=r.lineType,i=r.lineJointType,l=(0,B.L6)(this.props,!1),c=(0,B.L6)(a,!1);if("joint"===o)e=n.map(function(e){return{x:e.cx,y:e.cy}});else if("fitting"===o){var d=(0,_.wr)(n),u=d.xmin,m=d.xmax,p=d.a,h=d.b,x=function(e){return p*e+h};e=[{x:u,y:x(u)},{x:m,y:x(m)}]}var g=ex(ex(ex({},l),{},{fill:"none",stroke:l&&l.fill},c),{},{points:e});return t=s().isValidElement(a)?s().cloneElement(a,g):y()(a)?a(g):s().createElement(P.H,ep({},g,{type:i})),s().createElement(E.m,{className:"recharts-scatter-line",key:"recharts-scatter-line"},t)}},{key:"render",value:function(){var e=this.props,t=e.hide,r=e.points,n=e.line,a=e.className,o=e.xAxis,i=e.yAxis,l=e.left,c=e.top,d=e.width,u=e.height,m=e.id,p=e.isAnimationActive;if(t||!r||!r.length)return null;var x=this.state.isAnimationFinished,g=(0,h.Z)("recharts-scatter",a),y=o&&o.allowDataOverflow,f=i&&i.allowDataOverflow,b=j()(m)?this.id:m;return s().createElement(E.m,{className:g,clipPath:y||f?"url(#clipPath-".concat(b,")"):null},y||f?s().createElement("defs",null,s().createElement("clipPath",{id:"clipPath-".concat(b)},s().createElement("rect",{x:y?l:l-d/2,y:f?c:c-u/2,width:y?d:2*d,height:f?u:2*u}))):null,n&&this.renderLine(),this.renderErrorBar(),s().createElement(E.m,{key:"recharts-scatter-symbols"},this.renderSymbols()),(!p||x)&&S.e.renderCallByParent(this.props,r))}}],r=[{key:"getDerivedStateFromProps",value:function(e,t){return e.animationId!==t.prevAnimationId?{prevAnimationId:e.animationId,curPoints:e.points,prevPoints:t.curPoints}:e.points!==t.curPoints?{curPoints:e.points}:null}}],t&&eg(n.prototype,t),r&&eg(n,r),Object.defineProperty(n,"prototype",{writable:!1}),n}(a.PureComponent);ev(eN,"displayName","Scatter"),ev(eN,"defaultProps",{xAxisId:0,yAxisId:0,zAxisId:0,legendType:"circle",lineType:"joint",lineJointType:"linear",data:[],shape:"circle",hide:!1,isAnimationActive:!D.x.isSsr,animationBegin:0,animationDuration:400,animationEasing:"linear"}),ev(eN,"getComposedData",function(e){var t=e.xAxis,r=e.yAxis,n=e.zAxis,a=e.item,s=e.displayedData,o=e.xAxisTicks,i=e.yAxisTicks,l=e.offset,c=a.props.tooltipType,d=(0,B.NN)(a.props.children,es.b),u=j()(t.dataKey)?a.props.dataKey:t.dataKey,m=j()(r.dataKey)?a.props.dataKey:r.dataKey,p=n&&n.dataKey,h=n?n.range:en.defaultProps.range,x=h&&h[0],g=t.scale.bandwidth?t.scale.bandwidth():0,y=r.scale.bandwidth?r.scale.bandwidth():0,f=s.map(function(e,s){var l=(0,C.F$)(e,u),h=(0,C.F$)(e,m),f=!j()(p)&&(0,C.F$)(e,p)||"-",b=[{name:j()(t.dataKey)?a.props.name:t.name||t.dataKey,unit:t.unit||"",value:l,payload:e,dataKey:u,type:c},{name:j()(r.dataKey)?a.props.name:r.name||r.dataKey,unit:r.unit||"",value:h,payload:e,dataKey:m,type:c}];"-"!==f&&b.push({name:n.name||n.dataKey,unit:n.unit||"",value:f,payload:e,dataKey:p,type:c});var v=(0,C.Hv)({axis:t,ticks:o,bandSize:g,entry:e,index:s,dataKey:u}),N=(0,C.Hv)({axis:r,ticks:i,bandSize:y,entry:e,index:s,dataKey:m}),w="-"!==f?n.scale(f):x,k=Math.sqrt(Math.max(w,0)/Math.PI);return ex(ex({},e),{},{cx:v,cy:N,x:v-k,y:N-k,xAxis:t,yAxis:r,zAxis:n,width:2*k,height:2*k,size:w,node:{x:l,y:h,z:f},tooltipPayload:b,tooltipPosition:{x:v,y:N},payload:e},d&&d[s]&&d[s].props)});return ex({points:f},l)});var ew=r(86902),ek=r(29173),eA=r(39078),eP=(0,p.z)({chartName:"ComposedChart",GraphicalChild:[H.x,U,W.$,eN],axisComponents:[{axisType:"xAxis",AxisComp:ew.K},{axisType:"yAxis",AxisComp:ek.B},{axisType:"zAxis",AxisComp:en}],formatAxisMap:eA.t9}),eO=r(20903),eE=r(90626),eS=r(31634),eD=r(33231),e_=r(82087),eC=r(55119);function eB(){let e=(0,c.useRouter)(),[t,r]=(0,a.useState)(null),[s,p]=(0,a.useState)(!0),[h,x]=(0,a.useState)("overview");(0,a.useEffect)(()=>{g()},[]);let g=async()=>{try{p(!0);let{data:e}=await o.O.from("bookings").select("*").in("status",["confirmed","completed","pending","draft","cancelled"]),{data:t}=await o.O.from("products").select("*"),{data:n}=await o.O.from("customers").select("*");if(!e||!t||!n){p(!1);return}let a=e.filter(e=>"confirmed"===e.status||"completed"===e.status),s=a.reduce((e,t)=>e+(t.total_amount||0),0),i=a.length,l=a.map(e=>e.total_amount).sort((e,t)=>e-t),c=l[Math.floor(l.length/2)]||0,d=new Date,u=a.filter(e=>{let t=new Date(e.created_at);return t.getMonth()===d.getMonth()&&t.getFullYear()===d.getFullYear()}),m=u.reduce((e,t)=>e+(t.total_amount||0),0),h=u.length,x=new Date(d.getFullYear(),d.getMonth()-1),g=a.filter(e=>{let t=new Date(e.created_at);return t.getMonth()===x.getMonth()&&t.getFullYear()===x.getFullYear()}),y=g.reduce((e,t)=>e+(t.total_amount||0),0),f=g.length,b={};a.forEach(e=>{let t=new Date(e.created_at),r=`${t.getFullYear()}-${String(t.getMonth()+1).padStart(2,"0")}`;b[r]||(b[r]={revenue:0,bookings:0}),b[r].revenue+=e.total_amount||0,b[r].bookings+=1});let v=Object.entries(b).sort().map(([e,t])=>({month:e,revenue:Math.round(t.revenue),bookings:t.bookings})).slice(-12),j={};a.forEach(e=>{let t=new Date(e.created_at),r=Math.ceil(t.getDate()/7),n=`Vecka ${r}`;j[n]=(j[n]||0)+(e.total_amount||0)});let N=Object.entries(j).map(([e,t])=>({week:e,revenue:Math.round(t)})).slice(-8),w={};a.forEach(e=>{try{let t=e.products_requested;"string"==typeof t&&(t.startsWith('"')&&(t=JSON.parse(t)),"string"==typeof t&&(t=JSON.parse(t))),Array.isArray(t)&&t.forEach(e=>{w[e.id]||(w[e.id]={count:0,revenue:0,name:e.name,id:e.id}),w[e.id].count+=e.quantity||1,w[e.id].revenue+=(e.price||0)*(e.quantity||1)})}catch(e){}});let k=Object.values(w).sort((e,t)=>t.revenue-e.revenue).slice(0,5),A=Object.values(w).sort((e,t)=>t.revenue-e.revenue).slice(-5).reverse(),P={};a.forEach(e=>{try{let r=e.products_requested;"string"==typeof r&&(r.startsWith('"')&&(r=JSON.parse(r)),"string"==typeof r&&(r=JSON.parse(r))),Array.isArray(r)&&r.forEach(e=>{let r=t?.find(t=>t.id===e.id),n=r?.category||"\xd6vrigt";P[n]||(P[n]={revenue:0,bookings:0,count:0}),P[n].revenue+=(e.price||0)*(e.quantity||1),P[n].count+=1,P[n].bookings=0})}catch(e){}});let O=Object.entries(P).map(([e,t])=>({category:e,revenue:Math.round(t.revenue),bookings:t.count})).sort((e,t)=>t.revenue-e.revenue),E=n.length,S=n.filter(e=>(e.total_bookings||0)>1).length,D=E>0?S/E*100:0,_=n.filter(e=>{let t=new Date(e.created_at);return t.getMonth()===d.getMonth()&&t.getFullYear()===d.getFullYear()}).length,C=n.filter(e=>{let t=new Date(e.created_at);return t.getMonth()===x.getMonth()&&t.getFullYear()===x.getFullYear()}).length,B=n.filter(e=>"active"===e.status).length,K=C>0?(_-(C-_))/C*100:0,M={};e.forEach(e=>{M[e.status]=(M[e.status]||0)+1});let L=Object.entries(M).map(([e,t])=>({status:"draft"===e?"Utkast":"pending"===e?"V\xe4ntande":"confirmed"===e?"Bekr\xe4ftad":"completed"===e?"Slutf\xf6rd":"Avbruten",count:t})),F=e.length>0?(M.cancelled||0)/e.length*100:0,T=i>0?a.filter(e=>"completed"===e.status).length/a.length*100:0,R=a.map(e=>{if(e.event_date&&e.event_end_date){let t=new Date(e.event_date),r=new Date(e.event_end_date);return Math.ceil((r.getTime()-t.getTime())/864e5)}return 1}).filter(e=>e>0),I=R.length>0?Math.round(R.reduce((e,t)=>e+t)/R.length):1,z=n.map(e=>({name:e.name,revenue:e.total_revenue||0,bookings:e.total_bookings||0})).sort((e,t)=>t.revenue-e.revenue).slice(0,10),G=e.filter(e=>"pending"===e.status||"draft"===e.status).length;r({totalRevenue:s,totalBookings:i,averageOrderValue:i>0?s/i:0,medianOrderValue:c,revenueGrowth:Math.round(10*(y>0?(m-y)/y*100:100))/10,bookingGrowth:Math.round(10*(f>0?(h-f)/f*100:100))/10,customerGrowth:Math.round(10*K)/10,monthlyRevenue:v,weeklyRevenue:N,totalCustomers:E,activeCustomers:B,repeatCustomerRate:Math.round(10*D)/10,newCustomersThisMonth:_,topProducts:k,bottomProducts:A,categoryPerformance:O,bookingsByStatus:L,bookingCancellationRate:Math.round(10*F)/10,completionRate:Math.round(10*T)/10,averageEventDuration:I,topCustomers:z,pendingBookingsCount:G})}catch(e){console.error("Error fetching analytics data:",e)}finally{p(!1)}},y=async()=>{try{let e=document.getElementById("analytics-content");if(!e)return;let t=await (0,u.default)(e,{scale:2,backgroundColor:"#ffffff"}),r=t.toDataURL("image/png"),n=new d.ZP({orientation:"portrait",unit:"mm",format:"a4"}),a=n.internal.pageSize.getHeight(),s=n.internal.pageSize.getWidth(),o=t.height*s/t.width,i=o,l=0;for(n.addImage(r,"PNG",0,l,s,o),i-=a;i>=0;)l=i-o,n.addPage(),n.addImage(r,"PNG",0,l,s,o),i-=a;let c=new Date().toLocaleDateString("sv-SE");n.save(`EventGaraget_Analyticsrapport_${c}.pdf`)}catch(e){console.error("Error generating PDF:",e),alert("Kunde inte generera PDF")}};if(s)return n.jsx("div",{className:"flex items-center justify-center h-screen",children:"Laddar analytik..."});if(!t)return n.jsx("div",{className:"flex items-center justify-center h-screen text-red-600",children:"Kunde inte ladda analytikdata"});let f=["#3B82F6","#EF4444","#10B981","#F59E0B","#8B5CF6","#EC4899"];return(0,n.jsxs)("div",{className:"space-y-6 pb-12",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-4",children:[n.jsx("button",{onClick:()=>e.push("/dashboard"),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:n.jsx(i.Z,{size:24,className:"text-gray-600"})}),(0,n.jsxs)("div",{children:[n.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Analytics"}),n.jsx("p",{className:"text-gray-500 mt-1",children:"Verklig data fr\xe5n bokningssystemet"})]})]}),(0,n.jsxs)("button",{onClick:y,className:"flex items-center gap-2 px-6 py-3 bg-gradient-to-r from-red-600 to-orange-600 text-white rounded-lg hover:shadow-lg transition-all font-semibold",children:[n.jsx(l.Z,{size:20}),"Exportera som PDF"]})]}),n.jsx("div",{className:"flex gap-2 bg-white rounded-lg p-2 border border-gray-200",children:[{id:"overview",label:"\xd6versikt",icon:"\uD83D\uDCCA"},{id:"products",label:"Produkter",icon:"\uD83D\uDCE6"},{id:"customers",label:"Kunder",icon:"\uD83D\uDC65"},{id:"operational",label:"Drift",icon:"⚙️"}].map(e=>(0,n.jsxs)("button",{onClick:()=>x(e.id),className:`px-4 py-2 rounded-lg font-medium transition-all ${h===e.id?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[e.icon," ",e.label]},e.id))}),(0,n.jsxs)("div",{id:"analytics-content",className:"space-y-8 bg-white p-8 rounded-lg",children:["overview"===h&&(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCB0 Finansiell \xd6verblick"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gradient-to-br from-blue-50 to-blue-100 rounded-lg p-6 border border-blue-200",children:[n.jsx("p",{className:"text-sm font-medium text-blue-600",children:"Total Int\xe4kt"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-blue-900 mt-2",children:[t.totalRevenue.toLocaleString("sv-SE")," SEK"]})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-green-50 to-green-100 rounded-lg p-6 border border-green-200",children:[n.jsx("p",{className:"text-sm font-medium text-green-600",children:"Totala Bokningar"}),n.jsx("p",{className:"text-2xl font-bold text-green-900 mt-2",children:t.totalBookings})]}),(0,n.jsxs)("div",{className:"bg-gradient-to-br from-purple-50 to-purple-100 rounded-lg p-6 border border-purple-200",children:[n.jsx("p",{className:"text-sm font-medium text-purple-600",children:"Genomsnittligt V\xe4rde (AOV)"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-purple-900 mt-2",children:[Math.round(t.averageOrderValue).toLocaleString("sv-SE")," SEK"]})]})]})]}),(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCC8 Nyckeltal"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Median V\xe4rde"}),(0,n.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[Math.round(t.medianOrderValue).toLocaleString("sv-SE")," SEK"]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Totala Kunder"}),n.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:t.totalCustomers})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"Aktiva Kunder"}),n.jsx("p",{className:"text-xl font-bold text-gray-900 mt-1",children:t.activeCustomers})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-xs font-medium text-gray-600",children:"\xc5terkommer"}),(0,n.jsxs)("p",{className:"text-xl font-bold text-gray-900 mt-1",children:[t.repeatCustomerRate,"%"]})]})]})]}),(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCCA Tillv\xe4xtm\xe5tt (denna m\xe5nad vs f\xf6rra)"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[(0,n.jsxs)("div",{className:`rounded-lg p-4 border ${t.revenueGrowth>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsx("p",{className:`text-xs font-medium ${t.revenueGrowth>=0?"text-green-600":"text-red-600"}`,children:"Int\xe4ktstillv\xe4xt"}),(0,n.jsxs)("p",{className:`text-xl font-bold mt-1 ${t.revenueGrowth>=0?"text-green-900":"text-red-900"}`,children:[t.revenueGrowth>0?"+":"",t.revenueGrowth,"%"]})]}),(0,n.jsxs)("div",{className:`rounded-lg p-4 border ${t.bookingGrowth>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsx("p",{className:`text-xs font-medium ${t.bookingGrowth>=0?"text-green-600":"text-red-600"}`,children:"Bokningstillv\xe4xt"}),(0,n.jsxs)("p",{className:`text-xl font-bold mt-1 ${t.bookingGrowth>=0?"text-green-900":"text-red-900"}`,children:[t.bookingGrowth>0?"+":"",t.bookingGrowth,"%"]})]}),(0,n.jsxs)("div",{className:`rounded-lg p-4 border ${t.customerGrowth>=0?"bg-green-50 border-green-200":"bg-red-50 border-red-200"}`,children:[n.jsx("p",{className:`text-xs font-medium ${t.customerGrowth>=0?"text-green-600":"text-red-600"}`,children:"Kundtillv\xe4xt"}),(0,n.jsxs)("p",{className:`text-xl font-bold mt-1 ${t.customerGrowth>=0?"text-green-900":"text-red-900"}`,children:[t.customerGrowth>0?"+":"",t.customerGrowth,"%"]})]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83D\uDCC8 M\xe5natlig Trend (senaste 12 m\xe5nader)"}),n.jsx(m.h,{width:"100%",height:300,children:(0,n.jsxs)(eP,{data:t.monthlyRevenue,children:[n.jsx(eO.q,{strokeDasharray:"3 3"}),n.jsx(ew.K,{dataKey:"month",angle:-45,textAnchor:"end",height:80}),n.jsx(ek.B,{yAxisId:"left"}),n.jsx(ek.B,{yAxisId:"right",orientation:"right"}),n.jsx(eE.u,{formatter:e=>e.toLocaleString("sv-SE")}),n.jsx(eS.D,{}),n.jsx(U,{yAxisId:"left",type:"monotone",dataKey:"revenue",fill:"#3B82F6",stroke:"#3B82F6",name:"Int\xe4kt (SEK)"}),n.jsx(W.$,{yAxisId:"right",dataKey:"bookings",fill:"#10B981",name:"Bokningar"})]})})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83D\uDCC5 Veckovisa Int\xe4kter"}),n.jsx(m.h,{width:"100%",height:250,children:(0,n.jsxs)(eD.v,{data:t.weeklyRevenue,children:[n.jsx(eO.q,{strokeDasharray:"3 3"}),n.jsx(ew.K,{dataKey:"week"}),n.jsx(ek.B,{}),n.jsx(eE.u,{formatter:e=>`${e.toLocaleString("sv-SE")} SEK`}),n.jsx(W.$,{dataKey:"revenue",fill:"#F59E0B"})]})})]}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Bokningsstatus"}),n.jsx(m.h,{width:"100%",height:250,children:(0,n.jsxs)(e_.u,{children:[n.jsx(eC.b,{data:t.bookingsByStatus,cx:"50%",cy:"50%",labelLine:!1,label:({name:e,count:t})=>`${e}: ${t}`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:t.bookingsByStatus.map((e,t)=>n.jsx(es.b,{fill:f[t%f.length]},`cell-${t}`))}),n.jsx(eE.u,{})]})})]}),(0,n.jsxs)("div",{className:"space-y-3",children:[(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avbrytningsgrad"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[t.bookingCancellationRate,"%"]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Slutf\xf6randegrad"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[t.completionRate,"%"]})]}),(0,n.jsxs)("div",{className:"bg-white rounded-lg p-4 border border-gray-200",children:[n.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Genomsnittlig Eventl\xe4ngd"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:[t.averageEventDuration," dagar"]})]})]})]})]}),"products"===h&&n.jsx(n.Fragment,{children:(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDCE6 Produktanalys"}),(0,n.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83C\uDFC6 Topp 5 Produkter"}),n.jsx("div",{className:"space-y-3",children:t.topProducts.map((e,t)=>n.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:e.name}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["S\xe5lda: ",e.count," st"]})]}),n.jsx("div",{className:"text-right",children:(0,n.jsxs)("p",{className:"font-bold text-green-600",children:[e.revenue.toLocaleString("sv-SE")," SEK"]})})]})},t))})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83D\uDCC9 Bottom 5 Produkter"}),n.jsx("div",{className:"space-y-3",children:t.bottomProducts.map((e,t)=>n.jsx("div",{className:"bg-white rounded-lg p-3 border border-gray-200",children:(0,n.jsxs)("div",{className:"flex justify-between items-start",children:[(0,n.jsxs)("div",{className:"flex-1",children:[n.jsx("p",{className:"font-medium text-gray-900",children:e.name}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-1",children:["S\xe5lda: ",e.count," st"]})]}),n.jsx("div",{className:"text-right",children:(0,n.jsxs)("p",{className:"font-bold text-gray-600",children:[e.revenue.toLocaleString("sv-SE")," SEK"]})})]})},t))})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 mt-6",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83D\uDCCA Kategoriprestation"}),n.jsx(m.h,{width:"100%",height:300,children:(0,n.jsxs)(eD.v,{data:t.categoryPerformance,children:[n.jsx(eO.q,{strokeDasharray:"3 3"}),n.jsx(ew.K,{dataKey:"category",angle:-45,textAnchor:"end",height:80}),n.jsx(ek.B,{}),n.jsx(eE.u,{formatter:e=>`${e.toLocaleString("sv-SE")} SEK`}),n.jsx(W.$,{dataKey:"revenue",fill:"#8B5CF6"})]})})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200 mt-6",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Kategori\xf6versikt"}),(0,n.jsxs)("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-gray-300",children:[n.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Kategori"}),n.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Int\xe4kt"}),n.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Bokningar"})]})}),n.jsx("tbody",{children:t.categoryPerformance.map((e,t)=>(0,n.jsxs)("tr",{className:"border-b border-gray-200 bg-white hover:bg-gray-50",children:[n.jsx("td",{className:"py-2 px-3",children:e.category}),(0,n.jsxs)("td",{className:"text-right py-2 px-3 font-semibold",children:[e.revenue.toLocaleString("sv-SE")," SEK"]}),n.jsx("td",{className:"text-right py-2 px-3",children:e.bookings})]},t))})]})]})]})}),"customers"===h&&n.jsx(n.Fragment,{children:(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"\uD83D\uDC65 Kundanalys"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[n.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Totala Kunder"}),n.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:t.totalCustomers})]}),(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[n.jsx("p",{className:"text-xs font-medium text-green-600",children:"Aktiva Kunder"}),n.jsx("p",{className:"text-2xl font-bold text-green-900 mt-1",children:t.activeCustomers})]}),(0,n.jsxs)("div",{className:"bg-purple-50 rounded-lg p-4 border border-purple-200",children:[n.jsx("p",{className:"text-xs font-medium text-purple-600",children:"Nya denna m\xe5nad"}),n.jsx("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:t.newCustomersThisMonth})]}),(0,n.jsxs)("div",{className:"bg-orange-50 rounded-lg p-4 border border-orange-200",children:[n.jsx("p",{className:"text-xs font-medium text-orange-600",children:"\xc5terkommer"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-orange-900 mt-1",children:[t.repeatCustomerRate,"%"]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"\uD83C\uDFC6 Topp 10 Kunder"}),n.jsx("div",{className:"overflow-x-auto",children:(0,n.jsxs)("table",{className:"w-full text-sm",children:[n.jsx("thead",{children:(0,n.jsxs)("tr",{className:"border-b border-gray-300",children:[n.jsx("th",{className:"text-left py-2 px-3 font-semibold text-gray-700",children:"Namn"}),n.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Bokningar"}),n.jsx("th",{className:"text-right py-2 px-3 font-semibold text-gray-700",children:"Totala Int\xe4kt"})]})}),n.jsx("tbody",{children:t.topCustomers.map((e,t)=>(0,n.jsxs)("tr",{className:"border-b border-gray-200 bg-white hover:bg-gray-50",children:[n.jsx("td",{className:"py-2 px-3 font-medium",children:e.name}),n.jsx("td",{className:"text-right py-2 px-3",children:e.bookings}),(0,n.jsxs)("td",{className:"text-right py-2 px-3 font-semibold text-green-600",children:[e.revenue.toLocaleString("sv-SE")," SEK"]})]},t))})]})})]})]})}),"operational"===h&&n.jsx(n.Fragment,{children:(0,n.jsxs)("div",{children:[n.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"⚙️ Driftanalys"}),(0,n.jsxs)("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 mb-6",children:[(0,n.jsxs)("div",{className:"bg-yellow-50 rounded-lg p-4 border border-yellow-200",children:[n.jsx("p",{className:"text-xs font-medium text-yellow-600",children:"V\xe4ntande Bokningar"}),n.jsx("p",{className:"text-2xl font-bold text-yellow-900 mt-1",children:t.pendingBookingsCount})]}),(0,n.jsxs)("div",{className:"bg-blue-50 rounded-lg p-4 border border-blue-200",children:[n.jsx("p",{className:"text-xs font-medium text-blue-600",children:"Slutf\xf6randegrad"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:[t.completionRate,"%"]})]}),(0,n.jsxs)("div",{className:"bg-green-50 rounded-lg p-4 border border-green-200",children:[n.jsx("p",{className:"text-xs font-medium text-green-600",children:"Avbrytningsgrad"}),(0,n.jsxs)("p",{className:"text-2xl font-bold text-green-900 mt-1",children:[t.bookingCancellationRate,"%"]})]})]}),(0,n.jsxs)("div",{className:"bg-gray-50 rounded-lg p-6 border border-gray-200",children:[n.jsx("h3",{className:"font-bold text-gray-900 mb-4",children:"Drift\xf6versikt"}),n.jsx("table",{className:"w-full",children:(0,n.jsxs)("tbody",{children:[(0,n.jsxs)("tr",{className:"border-b border-gray-200",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-gray-700",children:"V\xe4ntande Bokningar"}),n.jsx("td",{className:"py-3 px-4 font-bold text-gray-900",children:t.pendingBookingsCount})]}),(0,n.jsxs)("tr",{className:"border-b border-gray-200",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-gray-700",children:"Bokningsslutf\xf6randegrad"}),(0,n.jsxs)("td",{className:"py-3 px-4 font-bold text-gray-900",children:[t.completionRate,"%"]})]}),(0,n.jsxs)("tr",{className:"border-b border-gray-200",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-gray-700",children:"Avbrytningsgrad"}),(0,n.jsxs)("td",{className:"py-3 px-4 font-bold text-red-600",children:[t.bookingCancellationRate,"%"]})]}),(0,n.jsxs)("tr",{className:"border-b border-gray-200",children:[n.jsx("td",{className:"py-3 px-4 font-medium text-gray-700",children:"Genomsnittlig Eventl\xe4ngd"}),(0,n.jsxs)("td",{className:"py-3 px-4 font-bold text-gray-900",children:[t.averageEventDuration," dagar"]})]})]})})]})]})}),n.jsx("div",{className:"border-t pt-6 mt-8",children:(0,n.jsxs)("div",{className:"bg-gradient-to-r from-gray-100 to-gray-50 rounded-lg p-6 border border-gray-200 text-center",children:[n.jsx("p",{className:"text-sm font-semibold text-gray-700",children:"EventGaraget Analytics Report"}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["Rapport genererad: ",new Date().toLocaleDateString("sv-SE")," kl ",new Date().toLocaleTimeString("sv-SE")]}),n.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"Baserat p\xe5 faktiska bokningsdata fr\xe5n systemet"})]})})]})]})}},77501:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>P});var n=r(95344),a=r(3729),s=r(8428),o=r(27984),i=r(56506),l=r(2273),c=r(89895),d=r(12401),u=r(2246),m=r(55794),p=r(16278),h=r(69599),x=r(91917),g=r(75950),y=r(37121),f=r(50340),b=r(28240),v=r(13746),j=r(48120);function N({user:e,onLogout:t}){let r=(0,s.usePathname)(),[N,w]=(0,a.useState)({});(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{let e={},{data:t}=await o.O.from("booking_tasks").select("id").eq("status","pending");e.todo=t?.length||0;let{data:r}=await o.O.from("bookings").select("id").eq("status","pending");e.bookings=r?.length||0;let{data:n}=await o.O.from("printer_foiling_orders").select("id");e.printer=n?.length||0;let{data:a}=await o.O.from("booking_tasks").select("id").neq("status","completed");e.warehouse=a?.length||0,w(e)}catch(e){console.error("Error fetching badge counts:",e)}},A=[{name:"Dashboard",icon:l.Z,href:"/dashboard",roles:["admin","manager"]},{name:"Kunder",icon:c.Z,href:"/dashboard/customers",roles:["admin","manager","support"]},{name:"Bokningar",icon:d.Z,href:"/dashboard/bookings",roles:["admin","manager"]},{name:"Att G\xf6ra",icon:u.Z,href:"/dashboard/todo",roles:["admin","manager"]},{name:"Kalender",icon:m.Z,href:"/dashboard/calendar",roles:["admin","manager","warehouse"]},{name:"Lager",icon:p.Z,href:"/dashboard/warehouse",roles:["warehouse"]},{name:"Lager Admin",icon:p.Z,href:"/dashboard/warehouse-admin",roles:["admin"]},{name:"Tryckeri",icon:h.Z,href:"/dashboard/printer",roles:["admin","printer"]},{name:"Produkter & Prislista",icon:x.Z,href:"/dashboard/products",roles:["admin","manager"]},{name:"FAQ",icon:g.Z,href:"/dashboard/faq",roles:["admin","manager"]},{name:"Till\xe4gg",icon:x.Z,href:"/dashboard/addons",roles:["admin","manager"]},{name:"Aktivitetslogg",icon:y.Z,href:"/dashboard/activity-log",roles:["admin"]},{name:"Analytics",icon:f.Z,href:"/dashboard/analytics",roles:["admin"]},{name:"Anv\xe4ndare",icon:b.Z,href:"/dashboard/users",roles:["admin"]},{name:"Inst\xe4llningar",icon:v.Z,href:"/dashboard/settings",roles:["admin"]}].filter(t=>t.roles.includes(e.role));return(0,n.jsxs)("aside",{className:"fixed left-0 top-0 h-screen w-64 bg-white border-r border-gray-200 flex flex-col",children:[n.jsx("div",{className:"p-6 border-b border-gray-200",children:n.jsx("div",{className:"flex items-center gap-3",children:n.jsx("img",{src:"/logo.png",alt:"EventGaraget",className:"h-18"})})}),n.jsx("nav",{className:"flex-1 overflow-y-auto p-4 space-y-2",children:A.map(e=>{let t=e.icon,a="/dashboard"===e.href?r===e.href:r.startsWith(e.href),s=0;return"/dashboard/todo"===e.href&&(s=N.todo||0),"/dashboard/bookings"===e.href&&(s=N.bookings||0),"/dashboard/printer"===e.href&&(s=N.printer||0),"/dashboard/warehouse"===e.href&&(s=N.warehouse||0),(0,n.jsxs)(i.default,{href:e.href,className:`flex items-center gap-3 px-4 py-2 rounded-lg transition-colors justify-between ${a?"bg-red-50 text-red-600 font-medium":"text-gray-700 hover:bg-gray-50"}`,children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[n.jsx(t,{size:20}),n.jsx("span",{children:e.name})]}),s>0&&n.jsx("span",{className:"bg-red-600 text-white text-xs font-bold px-2 py-1 rounded-full min-w-max",children:s})]},e.href)})}),(0,n.jsxs)("div",{className:"p-4 border-t border-gray-200 space-y-3",children:[(0,n.jsxs)("div",{className:"px-4 py-3 bg-gray-50 rounded-lg",children:[n.jsx("p",{className:"text-sm font-medium text-gray-900",children:e.full_name}),n.jsx("p",{className:"text-xs text-gray-500",children:e.email}),(0,n.jsxs)("p",{className:"text-xs text-gray-500 capitalize mt-1",children:["Rolle: ",e.role]})]}),(0,n.jsxs)("button",{onClick:t,className:"w-full flex items-center gap-2 px-4 py-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",children:[n.jsx(j.Z,{size:18}),n.jsx("span",{className:"text-sm",children:"Logga ut"})]})]})]})}var w=r(28765),k=r(33037);function A({user:e}){return(0,n.jsxs)("div",{className:"fixed top-0 left-64 right-0 h-16 bg-white border-b border-gray-200 flex items-center justify-between px-8 z-40",children:[n.jsx("div",{className:"flex-1 max-w-md",children:(0,n.jsxs)("div",{className:"relative",children:[n.jsx(w.Z,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",size:18}),n.jsx("input",{type:"text",placeholder:"S\xf6k kunder, bokningar...",className:"w-full pl-10 pr-4 py-2 bg-gray-50 border border-gray-200 rounded-lg focus:outline-none focus:border-red-500 focus:bg-white"})]})}),(0,n.jsxs)("div",{className:"flex items-center gap-6 ml-8",children:[(0,n.jsxs)("button",{className:"relative p-2 text-gray-600 hover:bg-gray-100 rounded-lg transition-colors",children:[n.jsx(k.Z,{size:20}),n.jsx("span",{className:"absolute top-1 right-1 w-2 h-2 bg-red-500 rounded-full"})]}),(0,n.jsxs)("div",{className:"flex items-center gap-3 pl-6 border-l border-gray-200",children:[n.jsx("div",{className:"w-8 h-8 bg-red-100 rounded-full flex items-center justify-center",children:n.jsx("span",{className:"text-sm font-bold text-red-600",children:e.full_name.split(" ").map(e=>e[0]).join("").toUpperCase()})}),n.jsx("span",{className:"text-sm text-gray-700",children:e.full_name})]})]})]})}function P({children:e}){let t=(0,s.useRouter)(),[r,i]=(0,a.useState)(null),[l,c]=(0,a.useState)(!0);(0,a.useEffect)(()=>{(async()=>{try{let{data:{session:e}}=await o.O.auth.getSession();if(!e){t.push("/");return}let{data:r}=await o.O.from("user_profiles").select("*").eq("id",e.user.id).single();r&&i(r)}catch(e){console.error("Auth check error:",e),t.push("/")}finally{c(!1)}})()},[t]);let d=async()=>{await o.O.auth.signOut(),t.push("/")};return l?n.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:(0,n.jsxs)("div",{className:"text-center",children:[n.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-lg gradient-primary animate-pulse mb-4"}),n.jsx("p",{className:"text-gray-600",children:"Laddar..."})]})}):r?(0,n.jsxs)("div",{className:"flex h-screen bg-gray-50",children:[n.jsx(N,{user:r,onLogout:d}),(0,n.jsxs)("div",{className:"flex-1 flex flex-col ml-64",children:[n.jsx(A,{user:r}),n.jsx("main",{className:"flex-1 overflow-auto pt-20 px-8 pb-8",children:e})]})]}):null}},27984:(e,t,r)=>{"use strict";r.d(t,{O:()=>o});var n=r(86725);let a=process.env.NEXT_PUBLIC_SUPABASE_URL,s=process.env.NEXT_PUBLIC_SUPABASE_ANON_KEY;a&&s||console.warn("Missing Supabase environment variables - using demo mode");let o=(0,n.eI)(a||"https://demo.supabase.co",s||"demo-key")},96885:(e,t,r)=>{"use strict";r.d(t,{Z:()=>n});/**
 * @license lucide-react v0.309.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */let n=(0,r(69224).Z)("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]])},9628:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>a,default:()=>o});let n=(0,r(86843).createProxy)(String.raw`/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/analytics/page.tsx`),{__esModule:a,$$typeof:s}=n,o=n.default},96339:(e,t,r)=>{"use strict";r.r(t),r.d(t,{$$typeof:()=>s,__esModule:()=>a,default:()=>o});let n=(0,r(86843).createProxy)(String.raw`/Users/emanuelpossnert/Documents/Dev projects/Eventgaraget/crm-dashboard/app/dashboard/layout.tsx`),{__esModule:a,$$typeof:s}=n,o=n.default},82917:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>s,metadata:()=>a});var n=r(25036);r(67272);let a={title:"EventGaraget CRM",description:"CRM Portal f\xf6r EventGaraget"};function s({children:e}){return n.jsx("html",{lang:"sv",children:n.jsx("body",{className:"bg-gray-50",children:e})})}},67272:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,356,880,934,510,377,282],()=>r(53807));module.exports=n})();